name: Build Workflow

on: [push]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@master
    - name: Archive Release
      uses: thedoctor0/zip-release@0.7.5
      with:
        type: 'zip'
        filename: 'bjet-release.zip'
        exclusions: '*.git* /*node_modules/* .editorconfig'
    - name: Create Tag
      id: create_tag
      uses: jaywcjlove/create-tag-action@main
      if: env.previous_tag
      with:
        test: '[R|r]elease[d]\s+[v|V]\d(\.\d+){0,2}'
    - name: Upload Release
      uses: ncipollo/release-action@v1.12.0
      with:
        name: ${{ steps.create_tag.outputs.version }}
        tag: ${{ steps.create_tag.outputs.version }}
        artifacts: "release.zip"
        token: ${{ secrets.GITHUB_TOKEN }}
